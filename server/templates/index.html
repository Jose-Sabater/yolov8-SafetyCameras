<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />
    <title>Image Stream with Inference Results</title>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.3.2/socket.io.js"></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/socket.io-client/dist/socket.io.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.4/socket.io.js" crossorigin="anonymous"></script>

    <script>
        var socket = io.connect('http://' + document.domain + ':' + location.port);
        socket.on('connect', function () {
            console.log('WebSocket connected');
        });
        socket.on('disconnect', function () {
            console.log('WebSocket disconnected');
        });
        socket.on('results', function (data) {
            var imgData = data.image;

            // Display the original image
            var imgElem = document.getElementById('img');
            imgElem.src = 'data:image/jpeg;base64,' + imgData;
            //log the image data
            console.log(imgData)
            console.log("recieved")


        });
    </script>
</head>

<body>
    <h1>Image Stream with Inference Results</h1>
    <img id="img" src="" width="640" height="480" />
</body>

</html>